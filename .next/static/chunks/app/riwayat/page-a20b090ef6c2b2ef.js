(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{2565:function(e,a,t){Promise.resolve().then(t.bind(t,83))},83:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return k}});var s=t(7437),n=t(2265),r=t(9376),i=t(7648),l=t(429),c=t(2252),d=t(1723),o=t(5302),u=t(8736),x=t(2660),m=t(3247),h=t(740),p=t(3774),y=t(1047),g=t(2208),f=t(9064),j=t(6281);function k(){let e=(0,r.useRouter)(),{user:a,isLoading:t,isAuthenticated:k}=(0,j.a)(),[b,N]=(0,n.useState)([]),[v,w]=(0,n.useState)([]),[Z,_]=(0,n.useState)(!0),[P,S]=(0,n.useState)("all"),[C,A]=(0,n.useState)("");(0,n.useEffect)(()=>{if(!t&&!k){f.ZP.error("Silakan login terlebih dahulu"),e.push("/login");return}a&&D()},[a,t,k,e]),(0,n.useEffect)(()=>{let e=b;"all"!==P&&(e=e.filter(e=>e.status===P)),C&&(e=e.filter(e=>e.kode_pengaduan.toLowerCase().includes(C.toLowerCase())||e.judul_pengaduan.toLowerCase().includes(C.toLowerCase()))),w(e)},[P,C,b]);let D=async()=>{try{_(!0);let e=[{id:"1",kode_pengaduan:"ADU-2024-0001",judul_pengaduan:"Upah tidak dibayar sesuai UMR",isi_pengaduan:"Perusahaan membayar upah di bawah UMR yang ditetapkan...",kategori:"Pengupahan",status:"di proses",lokasi_kejadian:"PT ABC, Jakarta",tanggal_kejadian:"2024-01-15",created_at:"2024-01-16T10:00:00Z"},{id:"2",kode_pengaduan:"ADU-2024-0002",judul_pengaduan:"PHK tanpa pesangon",isi_pengaduan:"Saya di-PHK tanpa diberikan pesangon sesuai ketentuan...",kategori:"Ketenagakerjaan",status:"selesai",lokasi_kejadian:"PT XYZ, Bandung",tanggal_kejadian:"2024-01-10",created_at:"2024-01-11T14:30:00Z"},{id:"3",kode_pengaduan:"ADU-2024-0003",judul_pengaduan:"Tidak ada APD di tempat kerja",isi_pengaduan:"Perusahaan tidak menyediakan APD untuk pekerja...",kategori:"K3",status:"diterima",lokasi_kejadian:"PT DEF, Surabaya",tanggal_kejadian:"2024-01-20",created_at:"2024-01-21T09:15:00Z"}];N(e),w(e)}catch(e){f.ZP.error("Gagal memuat data pengaduan"),console.error("Load error:",e)}finally{_(!1)}},E=e=>({diterima:"bg-green-100 text-green-700 border-green-200","di proses":"bg-yellow-100 text-yellow-700 border-yellow-200",selesai:"bg-blue-100 text-blue-700 border-blue-200"})[e]||"bg-gray-100 text-gray-700",T=e=>{switch(e){case"diterima":return(0,s.jsx)(c.Z,{className:"w-4 h-4"});case"di proses":return(0,s.jsx)(d.Z,{className:"w-4 h-4"});case"selesai":return(0,s.jsx)(o.Z,{className:"w-4 h-4"});default:return(0,s.jsx)(u.Z,{className:"w-4 h-4"})}},L=e=>new Date(e).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});return a?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,s.jsx)("nav",{className:"bg-white shadow-md sticky top-0 z-50",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(i.default,{href:"/dashboard",className:"flex items-center space-x-2 text-gray-600 hover:text-primary-600 transition-colors",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:"Kembali ke Dashboard"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:a.nama_lengkap}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:a.role})]})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Riwayat Pengaduan"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Lihat semua pengaduan yang pernah Anda ajukan"})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,s.jsx)("input",{type:"text",value:C,onChange:e=>A(e.target.value),placeholder:"Cari berdasarkan kode atau judul...",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-4 focus:ring-primary-100 transition-all outline-none"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,s.jsxs)("select",{value:P,onChange:e=>S(e.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-4 focus:ring-primary-100 transition-all outline-none appearance-none",children:[(0,s.jsx)("option",{value:"all",children:"Semua Status"}),(0,s.jsx)("option",{value:"diterima",children:"Diterima"}),(0,s.jsx)("option",{value:"di proses",children:"Di Proses"}),(0,s.jsx)("option",{value:"selesai",children:"Selesai"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:b.length}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:b.filter(e=>"di proses"===e.status).length}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Di Proses"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:b.filter(e=>"selesai"===e.status).length}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Selesai"})]})]})]}),Z?(0,s.jsx)("div",{className:"flex justify-center py-12",children:(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})}):0===v.length?(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(u.Z,{className:"w-10 h-10 text-gray-400"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:C||"all"!==P?"Tidak Ada Hasil":"Belum Ada Pengaduan"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:C||"all"!==P?"Coba ubah filter atau kata kunci pencarian":"Mulai buat pengaduan pertama Anda"}),!C&&"all"===P&&(0,s.jsxs)(i.default,{href:"/pengaduan",className:"inline-flex items-center space-x-2 px-6 py-3 bg-gradient-primary text-white rounded-xl hover:shadow-lg transition-all",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Buat Pengaduan"})]})]}):(0,s.jsx)("div",{className:"space-y-4",children:v.map((e,a)=>(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-all",children:(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-mono font-semibold text-primary-600",children:e.kode_pengaduan}),(0,s.jsxs)("span",{className:"inline-flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-semibold border ".concat(E(e.status)),children:[T(e.status),(0,s.jsx)("span",{className:"capitalize",children:e.status})]})]}),(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:e.judul_pengaduan}),(0,s.jsx)("p",{className:"text-gray-600 line-clamp-2 mb-3",children:e.isi_pengaduan}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[(0,s.jsxs)("span",{className:"inline-flex items-center space-x-1",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:e.kategori})]}),e.lokasi_kejadian&&(0,s.jsxs)("span",{className:"inline-flex items-center space-x-1",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:e.lokasi_kejadian})]}),(0,s.jsxs)("span",{className:"inline-flex items-center space-x-1",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:L(e.created_at)})]})]})]}),(0,s.jsxs)(i.default,{href:"/tracking?kode=".concat(e.kode_pengaduan),className:"ml-4 flex items-center space-x-2 px-4 py-2 bg-primary-50 text-primary-600 rounded-xl hover:bg-primary-100 transition-colors",children:[(0,s.jsx)(g.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Detail"})]})]})},e.id))})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})})}},6281:function(e,a,t){"use strict";t.d(a,{AuthProvider:function(){return l},a:function(){return c}});var s=t(7437),n=t(2265),r=t(9376);let i=(0,n.createContext)(void 0);function l(e){let{children:a}=e,[t,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),o=(0,r.useRouter)();(0,r.usePathname)(),(0,n.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("authToken"),a=localStorage.getItem("currentUser");if(e&&a){let e=JSON.parse(a);l(e)}else l(null)}catch(e){console.error("Auth check error:",e),l(null)}finally{d(!1)}})()},[]);let u=(0,n.useCallback)((e,a)=>{localStorage.setItem("authToken",a),localStorage.setItem("currentUser",JSON.stringify(e)),l(e)},[]),x=(0,n.useCallback)(()=>{localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),l(null),o.push("/")},[o]);return(0,s.jsx)(i.Provider,{value:{user:t,isLoading:c,login:u,logout:x,isAuthenticated:!!t},children:a})}function c(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2252:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2660:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5302:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2208:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8736:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},740:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},3774:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3247:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9376:function(e,a,t){"use strict";var s=t(5475);t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[647,64,971,117,744],function(){return e(e.s=2565)}),_N_E=e.O()}]);